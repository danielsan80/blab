parameters:

services:
    dan_diary.regexp.transformer:
        class: Dan\Plugin\DiaryBundle\Regexp\Transformer

    dan_diary.regexp.helper:
        class: Dan\Plugin\DiaryBundle\Regexp\Helper
        arguments:
            - @dan_diary.regexp.transformer
        calls:
            - [setDefaultRegexpFilename, [%diary_default_regexp_filename%]]

    dan_diary.analysis.helper:
        class: Dan\Plugin\DiaryBundle\Analysis\Helper

    dan_diary.event_listener.report:
        class: Dan\Plugin\DiaryBundle\EventListener\ReportListener
        arguments:
            - @dan_diary.regexp.helper
        calls:
            - [setLogger, [@logger]]
            - [setContainer, [@service_container]]
        tags:
            - { name: doctrine.event_listener, event: prePersist }
            - { name: doctrine.event_listener, event: preUpdate }

    dan_diary.plugin:
        class: Dan\Plugin\DiaryBundle\Plugin
        tags:
            - {name: dan.plugin}
