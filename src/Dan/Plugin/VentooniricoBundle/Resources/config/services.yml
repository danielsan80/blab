parameters:
#    dan_plugin_ventoonirico.example.class: Dan\Plugin\VentooniricoBundle\Example

services:
    dan_ventoonirico.plugin:
        class: Dan\Plugin\VentooniricoBundle\Plugin
        tags:
            - {name: dan.plugin}
            
    bgg:
        class: Dan\Plugin\VentooniricoBundle\Service\BGGService
        arguments:
            - @model.manager.metadata
            - @liip_doctrine_cache.ns.bgg
            
    model.manager.game:
        class: Dan\Plugin\VentooniricoBundle\Model\GameManager
        arguments:
            - @doctrine.orm.entity_manager
            - @bgg
            - @liip_doctrine_cache.ns.bgg
            
    model.manager.desire:
        class: Dan\Plugin\VentooniricoBundle\Model\DesireManager
        arguments:
            - @doctrine.orm.entity_manager

    dan_desire_subscriber:
        class: Dan\Plugin\VentooniricoBundle\Subscriber\DesireEventSubscriber
        calls:
            - [ setEntityManager, [ @doctrine.orm.entity_manager ] ]
        tags:
            - { name: jms_serializer.event_subscriber, event: preDeserialize, direction: deserialization, format: json }
            - { name: jms_serializer.event_subscriber, event: postDeserialize, direction: deserialization, format: json }
